---
import { markdownify } from "@/lib/utils/textConverter";
import type { CollectionEntry } from "astro:content";
import { getEntry } from "astro:content";
import ImageMod from "./ImageMod.astro";

const sectionData = (await getEntry(
  "teamMemberSectionCollection",
  "team-members"
)) as CollectionEntry<"teamMemberSectionCollection">;

const { enable, title, list } = sectionData.data;
---

{
  enable && (
    <section class="section">
      <div class="container">
        <div class="section-container">
          <div class="section-intro centralize">
            <h2
              class="title hasEmphasize "
              data-aos="fade-up-sm"
              data-aos-delay="0"
              set:html={markdownify(title)}
            />
          </div>
          <div class="section-content">
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
              {list.length &&
                list
                  .filter((item) => item.enable)
                  .map((item, index) => {
                    const aosDelay = 100 * (index % 4);
                    return (
                      <div
                        data-aos="fade-up-sm"
                        data-aos-delay={aosDelay}
                        class="p-4 rounded-xl border border-border colorize-ne  transition-all duration-300"
                      >
                        {/* Profile Picture Area */}
                        <ImageMod
                          src={item.image}
                          alt={item.name}
                          width={500}
                          height={500}
                          class="w-full object-cover aspect-square rounded-xl bg-colorize"
                        />
                        <div class="py-4">
                          <h3
                            class="text-h5-sm mb-2"
                            set:html={markdownify(item.name)}
                          />
                          <p
                            class="text-text-dark/80"
                            set:html={markdownify(item.position)}
                          />
                        </div>
                      </div>
                    );
                  })}
            </div>
          </div>
        </div>
      </div>
    </section>
  )
}
